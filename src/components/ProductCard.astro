---
const { title, img, star, fullPrice, discountPercentage } = Astro.props;
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏î‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
function getStarRating(rating: number) {
  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ string ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏î‡∏≤‡∏ß
  let stars = "";
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß‡πÄ‡∏ï‡πá‡∏°‡πÇ‡∏î‡∏¢‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©‡∏•‡∏á (‡πÄ‡∏ä‡πà‡∏ô 4.5 ‡∏à‡∏∞‡πÑ‡∏î‡πâ 4)
  const fullStars = Math.floor(rating);
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏®‡∏©‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏î‡∏≤‡∏ß
  const hasHalfStar = rating % 1 !== 0;

  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏≠‡∏µ‡πÇ‡∏°‡∏à‡∏¥ '‚≠êÔ∏è' ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ó‡πá‡∏Å img ‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ñ‡∏∂‡∏á‡πÑ‡∏ü‡∏•‡πå SVG
  const fullStarSVG = `<img src="./src/img/icons/Star.svg" alt="Full Star" style="width: 20px; height: 20px;">`; // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
  // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏î‡∏≤‡∏ß
  const halfStarSVG = `<img src="./src/img/icons/HalfStar.svg" alt="Half Star" style="width: 20px; height: 20px;">`;
  // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ
  for (let i = 0; i < fullStars; i++) {
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏î‡∏≤‡∏ß‡πÄ‡∏ï‡πá‡∏° '‚≠êÔ∏è' ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô string
    stars += fullStarSVG;
  }
  // ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏î‡∏≤‡∏ß ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏î‡∏≤‡∏ß‡∏Ñ‡∏£‡∏∂‡πà‡∏á 'üåó' ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ
  if (hasHalfStar) {
    stars += halfStarSVG;
  }
  // ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ string ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏î‡∏≤‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ
  return stars;
}
---

<li class="flex flex-col">
  <div class="h-70">
    <img class="w-full rounded-2xl h-70 object-cover" src={img} alt={title} />
  </div>
  <h3
    class="mt-2 font-bold text-[clamp(1rem,2vw,1.25rem)] truncate"
    title={title}
  >
    {title}
  </h3>
  <p class="mt-2 flex gap-1">
    <span class="flex" set:html={getStarRating(star)} /><span>
      <span>{star}</span>/<span class="text-gray-500">5</span>
    </span>
  </p>
  <section>
    {
      discountPercentage > 0 ? (
        <div class="flex items-center gap-2 mt-2">
          {/* ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ */}
          <p class="text-[clamp(1.25rem,3vw,1.5rem)] font-bold">
            ${(fullPrice - fullPrice * (discountPercentage / 100)).toFixed(2)}
          </p>
          {/* ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ï‡πá‡∏° (‡∏Ç‡∏µ‡∏î‡∏Ü‡πà‡∏≤) */}
          <p class=" text-[clamp(1.25rem,3vw,1.5rem)] font-bold  text-gray-500 line-through">
            ${fullPrice}
          </p>
          {/* ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î */}
          <p class="bg-red-100 rounded-full text-red-700 w-fit px-4 py-1 text-[clamp(0.625rem,3vw,0.75rem)]">
            -{discountPercentage}%
          </p> 
        </div>
      ) : (
        <p class="mt-2 text-[clamp(1.25rem,3vw,1.5rem)] font-bold  ">${fullPrice}</p>
      )
    }
  </section>
</li>
